# Структура сайта и шаблоны в Evolution CMS

## Оглавление

- [Введение](#part1)
- [Создаём шаблоны](#part2)
- [Создаём структуру сайта](#part3)
- [Про URL](#part4)

## Введение <a name="part1"></a>

Шаблонам в Evolution CMS уделяется очень внимания. Я бы назвал шаблон единицей смысла, структуры и дизайна.

За что отвечает шаблон?

- внешний вид страницы
- тип отдаваемого содержимого
- дополнительные поля страницы
- имя контроллера для выдачи данных

Если проводить аналогии с другими cms, то ближайший аналог в Друпал - "тип материала", в Вордпресс - "тип контента" (посты,страницы).

Как и в этих cms, шаблону могут быть назначены *свои* параметры, характерные именно для того типа контента, который он представляет.

**Пример:** Для шаблона "Новость" будет логичным задать параметр "Изображение новости". Для шаблона "Товар" не помешает параметр "Цена товара" и так далее.

## Создаём шаблоны <a name="part2"></a>

Создадим шаблоны, которые потребуются нам на этом этапе.

#### Как создать шаблон?

Заходим в "Элементы"-"Шаблоны" и создаём новый шаблон.

![templates](assets/images/s19.png)

Обратите внимание на поля "псевдоним" и чекбокс "Создать файл шаблона при сохранении". Заполняйте псевдоним и ставьте чекбокс. Это обязательно будет нужно в дальнейшем.

> Заодно я указываю категорию "Шаблоны", котрую назначу всем шаблонам. Название произвольное и нужно для поддержания порядка на сайте. Скажем, на большом сайте можно разбить все шаблоны по категориям, чтобы легче ориентироваться в админке.
### Наши шаблоны
Вот таблица, где расписано, какие имена, псевдонимы и описания нужно задать шаблонам для будущего сайта компании.

| Имя              | Псевдоним |      Описание |
| ---------------- | :-------: | ------------: |
| Главная страница |   main    |   Для главной |
| Услуги        |   blogs   |  Лента блогов |
| Пост в блоге     |   post    |  Пост в блоге |
| Контакты         | contacts  |      Контакты |
| Все теги         |   tags    |   Лента тегов |
| Тег              |    tag    | Страница тега |

Сделайте эту работу и сравните результаты с моими.

![created templates](assets/images/.png)

Разумеется, в дальнейшем вы вполне можете называть шаблоны так, как вам захочется. Это же справедливо и для поля "описание". А вот с псевдонимом я бы воздержался от дефисов и спецсимволов - могут возникнуть проблемы.

**Внимание:** Псевдоним в шаблоне не имеет никакого отношения к URL. Это именно англоязычное название для шаблона, которое нам понадобится впоследствие.

## Создаём структуру сайта <a name="part3"></a>

Теперь пришло время создать черновую структуру сайта в админке.
Слева в дереве вы уже видите первую страницу. Зайдите в редактирование и смените ей шаблон на "Главная страница".

![edit template](assets/images/.png)

Поизучайте поля. Переименуйте"Заголовок" в "Главная страница блога". Поле "Расширенный заголовок" и поле "Пункт меню" очистите. Сохраните страницу.

**Важно:** А вот в ресурсах поле "псевдоним" имеет самое прямое отношения к УРЛ. Это как раз и есть ЧПУ вашей страницы. По умолчанию генерируется автоматически путём транслитерации заголовка.

Теперь будем делать структуру сайта. Слева сверху найдите иконку "Новый ресурс" и, используя её, добавьте новый ресурс.

![create resource](assets/images/.png)

Какая структура нам нужна?

- Главная страница (_шаблон "Главная страница"_)
- Все блоги (_шаблон "Все блоги"_, псевдоним blogs)
  - Запись в блоге (_шаблон "Пост в блоге"_)
  - ...
- Новости (_шаблон "Все Новости"_, псевдоним tags)
  - Новость (_шаблон "Тег"_)
  - ...
- Контакты (_шаблон "Контакты"_, псевдоним contacts)

Для создания вложенных ресурсов типа новостей нажмите на правую кнопку мыши на родительском ресурсе и в меню выберите "Дочерний ресурс".

![create child](assets/images/s29.png)

Кстати, для тегов и постов не обязательно указывать псевдоним, пусть cms генерирует его сама. Мы указали псевдонимы только для важных сущностей, таких так общая страница всех блогов, страница тегов, страница контактов.

Давайте сравним, что получилось у меня и у вас:

![structure](assets/images/s30.png)

## Зависимость URL от структуры <a name="part4"></a>

Откройте пост для редактирования и найдите сверху кнопку "Просмотр". Нажмите её и обратите внимание, по какому адресу открылся документ.

```
http://evoblog.localhost/blogs/post-o-chyom-to.html
```

Evolution CMS сгеренировала адрес, отталкиваясь от расположения ресурса. Пост лежит в папке "Блоги", которая имеет псевдоним `blogs`. Сам пост имеет псевдоним (у меня) `post-o-chyom-to`. Система сделала адрес, основываясь на структуре сайта и добавила суффикс `.html`.

**Важно:** Делаем вывод - структура важна не только для того, чтобы администратор сайта знал, где что лежит, но и для формирования адресов сайта.


## Итого

- Созданы нужные шаблоны
- Создана структура сайта внутри админ-панели
- Снаружи пока без изменений - сайт пустой

---

Отлично. Теперь пора разобраться с ТВ-параметрами: добавить постам картинки, сеошные теги и разные мелочи. [Переходите к уроку про ТВ-параметры](/005_%D0%A2%D0%92-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B%20%D0%B2%20Evolution%20CMS.md).
